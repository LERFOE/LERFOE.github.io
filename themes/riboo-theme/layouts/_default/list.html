{{ define "main" }}
<section class="posts-section">
    <div class="container">
        <div class="category-header">
            <h1 class="category-title">{{ .Title }}</h1>
            {{ if .Content }}
            <div class="category-description">
                {{ .Content }}
            </div>
            {{ end }}
            <p class="category-count">{{ len .Pages }} 篇文章</p>
        </div>

        <div class="posts-grid">
            {{ range .Pages }}
            <article class="post-card" data-post="{{ .File.BaseFileName }}">
                <div class="card-inner">
                    <div class="card-front">
                        <a href="{{ .Permalink }}" class="post-card-link">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="card-header">
                                    <div class="card-tags">
                                        {{ if .Params.tags }}
                                        {{ range first 2 .Params.tags }}
                                        <span class="card-tag">{{ . }}</span>
                                        {{ end }}
                                        {{ end }}
                                    </div>
                                    <time class="card-date">{{ .Date.Format "2006年1月2日" }}</time>
                                </div>
                                
                                <h3 class="card-title">{{ .Title }}</h3>
                                <p class="card-excerpt">{{ .Summary | truncate 120 }}</p>
                                
                                <div class="card-footer">
                                    <span class="card-reading-time">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <polyline points="12 6 12 12 16 14"></polyline>
                                        </svg>
                                        {{ .ReadingTime }}分钟
                                    </span>
                                    <span class="card-arrow">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                            <polyline points="12 5 19 12 12 19"></polyline>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="card-back">
                        <a href="{{ .Permalink }}" class="post-card-link">
                            <div class="card-content">
                                <h3 class="card-title">{{ .Title }}</h3>
                                <div class="card-meta">
                                    <span class="card-date-full">{{ .Date.Format "2006年1月2日" }}</span>
                                    <span class="card-reading-time">{{ .ReadingTime }}分钟阅读</span>
                                </div>
                                <div class="card-tags-full">
                                    {{ range .Params.tags }}
                                    <span class="card-tag">{{ . }}</span>
                                    {{ end }}
                                </div>
                                <p class="card-excerpt-full">{{ .Summary | truncate 150 }}</p>
                                <div class="card-cta">
                                    <span>阅读全文 →</span>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </article>
            {{ end }}
        </div>

        <!-- 分页 -->
        {{ if gt .Paginator.TotalPages 1 }}
        <nav class="pagination">
            {{ if .Paginator.HasPrev }}
            <a href="{{ .Paginator.Prev.URL }}" class="pagination-link">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
                上一页
            </a>
            {{ end }}
            
            {{ range .Paginator.Pagers }}
            <a href="{{ .URL }}" class="pagination-link{{ if eq . $.Paginator }} active{{ end }}">{{ .PageNumber }}</a>
            {{ end }}
            
            {{ if .Paginator.HasNext }}
            <a href="{{ .Paginator.Next.URL }}" class="pagination-link">
                下一页
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </a>
            {{ end }}
        </nav>
        {{ end }}
    </div>
</section>
{{ end }}
